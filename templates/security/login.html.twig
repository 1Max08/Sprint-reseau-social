{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<div class="max-w-md mx-auto mt-12 p-8 bg-white dark:bg-darkBg rounded-2xl shadow-md border-2 border-primaryBlue dark:border-primaryGreen">

    <h1 class="text-4xl font-extrabold text-primaryBlue dark:text-primaryGreen mb-6 text-center tracking-tight">
        Connexion
    </h1>

    {% if error %}
        <div class="p-4 mb-4 rounded-xl text-white bg-red-500">
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
    {% endif %}

    {% if app.user %}
        <div class="mb-4 text-center text-gray-700 dark:text-gray-300 font-semibold">
            Connecté en tant que <span class="text-primaryGreen">{{ app.user.userIdentifier }}</span>,
            <a href="{{ path('app_logout') }}" class="text-primaryBlue dark:text-primaryGreen hover:underline">Se déconnecter</a>
        </div>
    {% endif %}

    <form method="post" class="space-y-4 bg-white dark:bg-darkBg p-4 rounded-xl border border-gray-300 dark:border-gray-700">

        <div>
            <label for="inputEmail" class="block mb-1 font-bold text-gray-900 dark:text-gray-200">Email</label>
            <input
                type="email"
                value="{{ last_username }}"
                name="email"
                id="inputEmail"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl shadow-sm bg-white dark:bg-darkBg text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-primaryBlue dark:focus:ring-primaryGreen focus:border-transparent"
                autocomplete="email"
                required
                autofocus
            >
        </div>

        <div>
            <label for="inputPassword" class="block mb-1 font-bold text-gray-900 dark:text-gray-200">Mot de passe</label>
            <input
                type="password"
                name="password"
                id="inputPassword"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl shadow-sm bg-white dark:bg-darkBg text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-primaryBlue dark:focus:ring-primaryGreen focus:border-transparent"
                autocomplete="current-password"
                required
            >
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

        <div class="flex items-center space-x-2">
            <input id="_remember_me" name="_remember_me" type="checkbox" class="h-4 w-4 accent-primaryGreen">
            <label for="_remember_me" class="text-gray-900 dark:text-gray-200 font-medium">Se souvenir de moi</label>
        </div>

        <button
            type="submit"
            class="w-full py-2 mt-4 bg-primaryBlue dark:bg-primaryGreen text-white font-bold rounded-xl shadow-md hover:opacity-90 transition"
        >
            Se connecter
        </button>
    </form>
</div>
{% endblock %}
