{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<div class="max-w-md mx-auto mt-12 p-8 bg-white rounded-2xl shadow-md border-2 border-primaryBlue">
    <h1 class="text-4xl font-extrabold text-primaryBlue mb-6 text-center tracking-tight">Connexion</h1>

    {% if error %}
        <div class="bg-red-100 text-red-700 border border-red-400 px-4 py-3 rounded mb-4">
            {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
    {% endif %}

    {% if app.user %}
        <div class="mb-3 text-center text-gray-700 font-semibold">
            Connecté en tant que <span class="text-primaryGreen">{{ app.user.userIdentifier }}</span>,
            <a href="{{ path('app_logout') }}" class="text-primaryBlue hover:underline">Se déconnecter</a>
        </div>
    {% endif %}

    <form method="post" class="space-y-4">
        <div>
            <label for="inputEmail" class="block text-gray-900 font-bold mb-1">Email</label>
            <input
                type="email"
                value="{{ last_username }}"
                name="email"
                id="inputEmail"
                class="w-full px-4 py-2 border rounded-xl shadow-sm focus:ring-2 focus:ring-primaryBlue focus:border-transparent bg-white text-gray-900"
                autocomplete="email"
                required
                autofocus
            >
        </div>

        <div>
            <label for="inputPassword" class="block text-gray-900 font-bold mb-1">Mot de passe</label>
            <input
                type="password"
                name="password"
                id="inputPassword"
                class="w-full px-4 py-2 border rounded-xl shadow-sm focus:ring-2 focus:ring-primaryBlue focus:border-transparent bg-white text-gray-900"
                autocomplete="current-password"
                required
            >
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

        <div class="flex items-center space-x-2">
            <input id="_remember_me" name="_remember_me" type="checkbox" class="h-4 w-4 accent-primaryGreen">
            <label for="_remember_me" class="text-gray-900 font-medium">Se souvenir de moi</label>
        </div>

        <button
            class="w-full py-2 mt-4 bg-primaryBlue text-white font-bold rounded-xl shadow-md hover:bg-primaryGreen transition"
            type="submit"
        >
            Se connecter
        </button>
    </form>
</div>
{% endblock %}
