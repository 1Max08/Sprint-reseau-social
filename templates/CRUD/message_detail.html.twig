{% extends 'base.html.twig' %}

{% block title %}Détail du message{% endblock %}

{% block body %}
<div class="max-w-2xl mx-auto mt-12 p-8 bg-white rounded-2xl shadow-md border-2 border-primaryBlue">
    <h1 class="text-3xl font-bold text-primaryBlue mb-4">Message de {{ message.author.email }}</h1>

    <p class="text-gray-700 text-lg mb-4">
        {{ message.content }}
    </p>

    {% if message.image %}
        <img src="{{ asset(message.image) }}" alt="Image du message" class="rounded-xl shadow mb-4">
    {% endif %}

    <p class="text-sm text-gray-500">
        Publié le {{ message.createdAt|date('d/m/Y à H:i') }}
    </p>

    <a href="{{ path('default_home') }}"
       class="inline-block mt-6 py-2 px-4 bg-primaryBlue text-white font-bold rounded-xl shadow-md hover:bg-primaryGreen transition">
        ⬅ Retour à la liste
    </a>
    {% if is_granted('ROLE_ADMIN') or message.author == app.user %}
        <div class="mt-4">
            <a href="{{ path('message_update', {'id': message.id}) }}" class="inline-block mt-6 py-2 px-4 bg-primaryBlue text-white font-bold rounded-xl shadow-md hover:bg-primaryGreen transition">Modifier</a>
            <form action="{{ path('message_delete', {'id': message.id}) }}" method="post" class="d-inline" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce message ?');">
            <button type="submit" class="inline-block mt-6 py-2 px-4 bg-primaryBlue text-white font-bold rounded-xl shadow-md hover:bg-primaryGreen transition">Supprimer</button>
            </form>
        </div>
    {% endif %}
</div>
{% endblock %}
